{"version":3,"sources":["train-rails.js","script.js"],"names":["train","element","document","querySelector","stop","style","marginTop","offsetTop","trainStart","lastScrollTop","startScrolling","window","scrollY","stopScrolling","offsetHeight","startReverse","pageOffset","pageYOffset","documentElement","scrollTop","parseInt","replace","trainDeparture","start","move","ticking","addEventListener","e","requestAnimationFrame"],"mappings":";AAsCA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,eAAA,QAAA,WAAA,EAtCA,IAAMA,EAAQ,WAENC,IAAAA,EAAUC,SAASC,cAAc,UACjCC,EAAOF,SAASC,cAAc,SAGlCC,EAAKC,MAAMC,UAAYF,EAAKG,UAAY,KAEpCC,IAAAA,EAAaP,EAAQM,UACrBE,EAAgB,EAEb,OAAA,WACCC,IAAAA,EAAiBC,OAAOC,SAAWX,EAAQM,UAC3CM,EAAgBT,EAAKG,UAAYN,EAAQa,aAAeH,OAAOC,QAC/DG,EAAed,EAAQM,WAAaC,GAAcJ,EAAKG,UAAYN,EAAQa,aAC3EE,EAAaL,OAAOM,aAAef,SAASgB,gBAAgBC,UAE5DH,EAAaP,EAETC,GAAkBG,IAClBZ,EAAQI,MAAMC,UAAYK,OAAOC,QAAUJ,EAAa,MAIxDO,EAAeJ,OAAOC,UACtBX,EAAQI,MAAMC,UAAYK,OAAOC,QAAUJ,EAAa,MAIhEC,EAAgBO,GAAc,EAAI,EAAIA,EAGnCI,SAASlB,SAASC,cAAc,UAAUE,MAAMC,UAAUe,QAAQ,KAAM,KAAO,IAC9EpB,EAAQI,MAAMC,UAAY,SAKtC,QAAA,MAAA,EAAA,IAAMgB,EAAiB,SAACC,GAChBA,GAAAA,EAAO,CACHC,IAAAA,EAAOxB,IACPyB,GAAU,EAEdvB,SAASwB,iBAAiB,SAAU,SAACC,GAC5BF,IACDd,OAAOiB,sBAAsB,WACzBJ,IACAC,GAAU,IAEdA,GAAU,OAX1B,QAAA,eAAA;;ACpCA,aAFA,IAAA,EAAA,QAAA,kBAEA,EAAe,EAAA,iBAAA","file":"script.ea3511df.js","sourceRoot":"..\\..\\..\\ux-shopping-basket-sticky-on-rails\\src","sourcesContent":["const train = () => {\r\n\r\n    let element = document.querySelector(\".right\");\r\n    let stop = document.querySelector(\".stop\");\r\n    \r\n    // using margin to animate the movement\r\n    stop.style.marginTop = stop.offsetTop + \"px\";\r\n\r\n    let trainStart = element.offsetTop;\r\n    let lastScrollTop = 0;\r\n\r\n    return () => {\r\n        let startScrolling = window.scrollY >= element.offsetTop ? true : false;\r\n        let stopScrolling = stop.offsetTop - element.offsetHeight > window.scrollY ? true : false;\r\n        let startReverse = element.offsetTop >= trainStart && stop.offsetTop - element.offsetHeight;\r\n        let pageOffset = window.pageYOffset || document.documentElement.scrollTop;\r\n        \r\n        if (pageOffset > lastScrollTop) {\r\n            // user scrolling down\r\n            if (startScrolling && stopScrolling) {\r\n                element.style.marginTop = window.scrollY - trainStart + \"px\";\r\n            }\r\n        } else {\r\n            // user scrolling up\r\n            if (startReverse > window.scrollY) {\r\n                element.style.marginTop = window.scrollY - trainStart + \"px\";\r\n            }\r\n        }\r\n        // For Mobile or negative scrolling\r\n        lastScrollTop = pageOffset <= 0 ? 0 : pageOffset;\r\n\r\n        //tmp bugfix\r\n        if(parseInt(document.querySelector(\".right\").style.marginTop.replace(\"px\", \"\")) < 0) {\r\n            element.style.marginTop = \"0px\";\r\n        }\r\n    };\r\n}\r\n\r\nconst trainDeparture = (start) => {\r\n    if (start) {\r\n        let move = train();\r\n        let ticking = false;\r\n\r\n        document.addEventListener('scroll', (e) => {\r\n            if (!ticking) {\r\n                window.requestAnimationFrame(function () {\r\n                    move();\r\n                    ticking = false;\r\n                });\r\n                ticking = true;\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport { train, trainDeparture }","import { train, trainDeparture } from './train-rails'\r\n\r\ntrainDeparture(true);"]}